{"ast":null,"code":"var _jsxFileName = \"/home/sabirhassan/Desktop/imroz2/client/src/components/NewChat/newChat.js\";\nimport React from 'react';\nimport { FormControl, InputLabel, Input, Button, Paper, withStyles, CssBaseline, Typography } from '@material-ui/core';\nimport styles from './style';\nimport axios from 'axios';\n\nclass NewChatComponent extends React.Component {\n  constructor() {\n    super();\n\n    this.userTyping = (inputType, e) => {\n      switch (inputType) {\n        case 'username':\n          this.setState({\n            username: e.target.value\n          });\n          break;\n\n        case 'message':\n          this.setState({\n            message: e.target.value\n          });\n          break;\n\n        default:\n          break;\n      }\n    };\n\n    this.submitNewChat = async e => {\n      e.preventDefault();\n      axios.post('http://localhost:9000/checkuser', {\n        username: this.state.username\n      }).then(res => {\n        console.log(res);\n\n        if (res.data) {\n          const docKey = this.buildDocKey();\n          axios.post('http://localhost:9000/checkchat', {\n            id: docKey\n          }).then(res => {\n            console.log(res);\n\n            if (res.data) {\n              this.goToChat();\n            } else {\n              this.createChat();\n            }\n          });\n        }\n      });\n    };\n\n    this.buildDocKey = () => [this.props.currentuser, this.state.username].sort().join(':');\n\n    this.createChat = () => {\n      this.props.newChatSubmitFn({\n        sendTo: this.state.username,\n        message: this.state.message\n      });\n    };\n\n    this.goToChat = () => this.props.goToChatFn(this.buildDocKey(), this.state.message);\n\n    this.chatExists = () => {\n      const docKey = this.buildDocKey();\n      axios.post('http://localhost:9000/checkchat', {\n        id: docKey\n      }).then(res => {\n        console.log(res);\n\n        if (res.data) {\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n\n    this.userExists = () => {\n      axios.post('http://localhost:9000/checkuser', {\n        username: this.state.username\n      }).then(res => {\n        console.log(res);\n\n        if (res.data) {\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n\n    this.state = {\n      username: null,\n      message: null\n    };\n  }\n\n  componentWillMount() {\n    /*\n    if(!firebase.auth().currentUser)\n      this.props.history.push('/login');\n    */\n  }\n\n  render() {\n    const {\n      classes\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"main\", {\n      className: classes.main,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CssBaseline, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Paper, {\n      className: classes.paper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      component: \"h1\",\n      variant: \"h5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }\n    }, \"Send A Message!\"), /*#__PURE__*/React.createElement(\"form\", {\n      className: classes.form,\n      onSubmit: e => this.submitNewChat(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(FormControl, {\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(InputLabel, {\n      htmlFor: \"new-chat-username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 15\n      }\n    }, \"Enter Your Friend's Email\"), /*#__PURE__*/React.createElement(Input, {\n      required: true,\n      className: classes.input,\n      autoFocus: true,\n      onChange: e => this.userTyping('username', e),\n      id: \"new-chat-username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(FormControl, {\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(InputLabel, {\n      htmlFor: \"new-chat-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 15\n      }\n    }, \"Enter Your Message\"), /*#__PURE__*/React.createElement(Input, {\n      required: true,\n      className: classes.input,\n      onChange: e => this.userTyping('message', e),\n      id: \"new-chat-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      fullWidth: true,\n      variant: \"contained\",\n      color: \"primary\",\n      className: classes.submit,\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }\n    }, \"Send\")), this.state.serverError ? /*#__PURE__*/React.createElement(Typography, {\n      component: \"h5\",\n      variant: \"h6\",\n      className: classes.errorText,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }\n    }, \"Unable to locate the user\") : null));\n  }\n\n}\n\nexport default withStyles(styles)(NewChatComponent);","map":{"version":3,"sources":["/home/sabirhassan/Desktop/imroz2/client/src/components/NewChat/newChat.js"],"names":["React","FormControl","InputLabel","Input","Button","Paper","withStyles","CssBaseline","Typography","styles","axios","NewChatComponent","Component","constructor","userTyping","inputType","e","setState","username","target","value","message","submitNewChat","preventDefault","post","state","then","res","console","log","data","docKey","buildDocKey","id","goToChat","createChat","props","currentuser","sort","join","newChatSubmitFn","sendTo","goToChatFn","chatExists","userExists","componentWillMount","render","classes","main","paper","form","input","submit","serverError","errorText"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { FormControl, InputLabel, Input, Button, Paper, withStyles, CssBaseline, Typography } from '@material-ui/core';\nimport styles from './style';\nimport axios from 'axios'\n\nclass NewChatComponent extends React.Component {\n\n  constructor() {\n    super();\n    this.state = {\n      username: null,\n      message: null\n    };\n  }\n\n\n\n  componentWillMount() {\n    /*\n    if(!firebase.auth().currentUser)\n      this.props.history.push('/login');\n    */\n  }\n\n  userTyping = (inputType, e) => {\n    switch (inputType) {\n      case 'username':\n        this.setState({ username: e.target.value });\n        break;\n      \n      case 'message':\n        this.setState({ message: e.target.value });\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  submitNewChat = async (e) => {\n    e.preventDefault();\n    axios.post('http://localhost:9000/checkuser', {username:this.state.username})\n    .then(res => {\n      console.log(res);\n      if(res.data){\n        const docKey = this.buildDocKey();\n    \n        axios.post('http://localhost:9000/checkchat', {id:docKey})\n        .then(res => {\n          console.log(res);\n          if(res.data){\n            this.goToChat()\n          }\n          else{\n            this.createChat()\n          }\n        })\n\n\n      }\n    })\n  }\n\n  buildDocKey = () => [this.props.currentuser, this.state.username].sort().join(':');\n\n  createChat = () => {\n    this.props.newChatSubmitFn({\n      sendTo: this.state.username,\n      message: this.state.message\n    });\n  }\n\n  goToChat = () => this.props.goToChatFn(this.buildDocKey(), this.state.message);\n\n  chatExists = () => {\n    const docKey = this.buildDocKey();\n    \n    axios.post('http://localhost:9000/checkchat', {id:docKey})\n    .then(res => {\n      console.log(res);\n      if(res.data){\n        return true\n      }\n      else{\n        return false\n      }\n    })\n\n\n  }\n\n  userExists =  () => {\n\n    axios.post('http://localhost:9000/checkuser', {username:this.state.username})\n    .then(res => {\n      console.log(res);\n      if(res.data){\n        return true\n      }\n      else{\n        return false\n      }\n    })\n  }\n\n  render() {\n\n    const { classes } = this.props;\n\n    return(\n      <main className={classes.main}>\n        <CssBaseline/>\n        <Paper className={classes.paper}>\n          <Typography component=\"h1\" variant=\"h5\">Send A Message!</Typography>\n          <form className={classes.form} onSubmit={(e) => this.submitNewChat(e)}>\n            <FormControl fullWidth>\n              <InputLabel htmlFor='new-chat-username'>\n                  Enter Your Friend's Email\n              </InputLabel>\n              <Input required \n                className={classes.input}\n                autoFocus \n                onChange={(e) => this.userTyping('username', e)} \n                id='new-chat-username'>\n              </Input>\n            </FormControl>\n            <FormControl fullWidth>\n              <InputLabel htmlFor='new-chat-message'>\n                  Enter Your Message\n              </InputLabel>\n              <Input required \n                className={classes.input}\n                onChange={(e) => this.userTyping('message', e)} \n                id='new-chat-message'>\n              </Input>\n            </FormControl>\n            <Button fullWidth variant='contained' color='primary' className={classes.submit} type='submit'>Send</Button>\n          </form>\n          {\n            this.state.serverError ? \n            <Typography component='h5' variant='h6' className={classes.errorText}>\n              Unable to locate the user\n            </Typography> :\n            null\n          }\n        </Paper>\n      </main>\n    );\n  }\n\n}\n\nexport default withStyles(styles)(NewChatComponent);"]},"metadata":{},"sourceType":"module"}