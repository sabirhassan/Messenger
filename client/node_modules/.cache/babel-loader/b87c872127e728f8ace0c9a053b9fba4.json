{"ast":null,"code":"var _jsxFileName = \"/home/sabirhassan/Desktop/imroz2/client/src/components/NewChat/newChat.js\";\nimport React from 'react';\nimport { FormControl, InputLabel, Input, Button, Paper, withStyles, CssBaseline, Typography } from '@material-ui/core';\nimport styles from './style';\n\nclass NewChatComponent extends React.Component {\n  constructor() {\n    super();\n\n    this.userTyping = (inputType, e) => {\n      switch (inputType) {\n        case 'username':\n          this.setState({\n            username: e.target.value\n          });\n          break;\n\n        case 'message':\n          this.setState({\n            message: e.target.value\n          });\n          break;\n\n        default:\n          break;\n      }\n    };\n\n    this.submitNewChat = async e => {\n      e.preventDefault();\n      const userExists = await this.userExists();\n\n      if (userExists) {\n        const chatExists = await this.chatExists();\n        chatExists ? this.goToChat() : this.createChat();\n      }\n    };\n\n    this.buildDocKey = () => [firebase.auth().currentUser.email, this.state.username].sort().join(':');\n\n    this.createChat = () => {\n      this.props.newChatSubmitFn({\n        sendTo: this.state.username,\n        message: this.state.message\n      });\n    };\n\n    this.goToChat = () => this.props.goToChatFn(this.buildDocKey(), this.state.message);\n\n    this.chatExists = async () => {\n      const docKey = this.buildDocKey();\n      /*\n      const chat = await \n        firebase\n        .firestore()\n        .collection('chats')\n        .doc(docKey)\n        .get();\n      */\n      //console.log(chat.exists);\n      //return chat.exists;\n    };\n\n    this.userExists = async () => {\n      /*  const usersSnapshot = await \n        firebase\n          .firestore()\n          .collection('users')\n          .get();\n        const exists = usersSnapshot\n          .docs\n            .map(_doc => _doc.data().email)\n            .includes(this.state.username);\n        this.setState({ serverError: !exists });\n        return exists;\n        */\n    };\n\n    this.state = {\n      username: null,\n      message: null\n    };\n  }\n\n  componentWillMount() {\n    /*\n    if(!firebase.auth().currentUser)\n      this.props.history.push('/login');\n    */\n  }\n\n  render() {\n    const {\n      classes\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"main\", {\n      className: classes.main,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CssBaseline, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Paper, {\n      className: classes.paper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      component: \"h1\",\n      variant: \"h5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }\n    }, \"Send A Message!\"), /*#__PURE__*/React.createElement(\"form\", {\n      className: classes.form,\n      onSubmit: e => this.submitNewChat(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(FormControl, {\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(InputLabel, {\n      htmlFor: \"new-chat-username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 15\n      }\n    }, \"Enter Your Friend's Email\"), /*#__PURE__*/React.createElement(Input, {\n      required: true,\n      className: classes.input,\n      autoFocus: true,\n      onChange: e => this.userTyping('username', e),\n      id: \"new-chat-username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(FormControl, {\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(InputLabel, {\n      htmlFor: \"new-chat-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 15\n      }\n    }, \"Enter Your Message\"), /*#__PURE__*/React.createElement(Input, {\n      required: true,\n      className: classes.input,\n      onChange: e => this.userTyping('message', e),\n      id: \"new-chat-message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      fullWidth: true,\n      variant: \"contained\",\n      color: \"primary\",\n      className: classes.submit,\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }\n    }, \"Send\")), this.state.serverError ? /*#__PURE__*/React.createElement(Typography, {\n      component: \"h5\",\n      variant: \"h6\",\n      className: classes.errorText,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }\n    }, \"Unable to locate the user\") : null));\n  }\n\n}\n\nexport default withStyles(styles)(NewChatComponent);","map":{"version":3,"sources":["/home/sabirhassan/Desktop/imroz2/client/src/components/NewChat/newChat.js"],"names":["React","FormControl","InputLabel","Input","Button","Paper","withStyles","CssBaseline","Typography","styles","NewChatComponent","Component","constructor","userTyping","inputType","e","setState","username","target","value","message","submitNewChat","preventDefault","userExists","chatExists","goToChat","createChat","buildDocKey","firebase","auth","currentUser","email","state","sort","join","props","newChatSubmitFn","sendTo","goToChatFn","docKey","componentWillMount","render","classes","main","paper","form","input","submit","serverError","errorText"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { FormControl, InputLabel, Input, Button, Paper, withStyles, CssBaseline, Typography } from '@material-ui/core';\nimport styles from './style';\n\nclass NewChatComponent extends React.Component {\n\n  constructor() {\n    super();\n    this.state = {\n      username: null,\n      message: null\n    };\n  }\n\n\n\n  componentWillMount() {\n    /*\n    if(!firebase.auth().currentUser)\n      this.props.history.push('/login');\n    */\n  }\n\n  userTyping = (inputType, e) => {\n    switch (inputType) {\n      case 'username':\n        this.setState({ username: e.target.value });\n        break;\n      \n      case 'message':\n        this.setState({ message: e.target.value });\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  submitNewChat = async (e) => {\n    e.preventDefault();\n    const userExists = await this.userExists();\n    if(userExists) {\n      const chatExists = await this.chatExists();\n      chatExists ? this.goToChat() : this.createChat();\n    }\n  }\n\n  buildDocKey = () => [firebase.auth().currentUser.email, this.state.username].sort().join(':');\n\n  createChat = () => {\n    this.props.newChatSubmitFn({\n      sendTo: this.state.username,\n      message: this.state.message\n    });\n  }\n\n  goToChat = () => this.props.goToChatFn(this.buildDocKey(), this.state.message);\n\n  chatExists = async () => {\n    const docKey = this.buildDocKey();\n    /*\n    const chat = await \n      firebase\n      .firestore()\n      .collection('chats')\n      .doc(docKey)\n      .get();\n    */\n    //console.log(chat.exists);\n    //return chat.exists;\n  }\n\n  userExists = async () => {\n  /*  const usersSnapshot = await \n    firebase\n      .firestore()\n      .collection('users')\n      .get();\n    const exists = usersSnapshot\n      .docs\n        .map(_doc => _doc.data().email)\n        .includes(this.state.username);\n    this.setState({ serverError: !exists });\n    return exists;\n    */\n  }\n\n  render() {\n\n    const { classes } = this.props;\n\n    return(\n      <main className={classes.main}>\n        <CssBaseline/>\n        <Paper className={classes.paper}>\n          <Typography component=\"h1\" variant=\"h5\">Send A Message!</Typography>\n          <form className={classes.form} onSubmit={(e) => this.submitNewChat(e)}>\n            <FormControl fullWidth>\n              <InputLabel htmlFor='new-chat-username'>\n                  Enter Your Friend's Email\n              </InputLabel>\n              <Input required \n                className={classes.input}\n                autoFocus \n                onChange={(e) => this.userTyping('username', e)} \n                id='new-chat-username'>\n              </Input>\n            </FormControl>\n            <FormControl fullWidth>\n              <InputLabel htmlFor='new-chat-message'>\n                  Enter Your Message\n              </InputLabel>\n              <Input required \n                className={classes.input}\n                onChange={(e) => this.userTyping('message', e)} \n                id='new-chat-message'>\n              </Input>\n            </FormControl>\n            <Button fullWidth variant='contained' color='primary' className={classes.submit} type='submit'>Send</Button>\n          </form>\n          {\n            this.state.serverError ? \n            <Typography component='h5' variant='h6' className={classes.errorText}>\n              Unable to locate the user\n            </Typography> :\n            null\n          }\n        </Paper>\n      </main>\n    );\n  }\n\n}\n\nexport default withStyles(styles)(NewChatComponent);"]},"metadata":{},"sourceType":"module"}